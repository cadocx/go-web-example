<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        #search-results tr:hover {
            background-color: lightgrey;
            cursor: pointer;
        }
    </style>
    <title>Hi there!</title>
</head>
<body>
    <form id="search-form">
        <input name="search" />
        <input type="submit" value="search" />
    </form>
    <table>
        <thead>
            <tr>
                <td>Title</td>
                <td>Author</td>
                <td>Year</td>
                <td>ID</td>
            </tr>
        </thead>
        <tbody id="search-results">
            
        </tbody>
    </table>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        $("#search-form").on("submit", function(e) {
            e.preventDefault();
            $.ajax({
                url: "/search",
                method: "POST",
                data: $(this).serialize(),
                success: function(rawData) {
                    var parsed = JSON.parse(rawData);
                    if(!parsed) return;

                    var searchResults = $("#search-results");
                    searchResults.empty();

                    parsed.forEach(function(result){
                        var row = $("<tr><td>"
                                    + result.Title +
                                    "</td><td>" 
                                    + result.Author + 
                                    "</td><td>"
                                    + result.Year +
                                    "</td><td>"
                                    + result.ID+
                                    "</td></tr>");
                        searchResults.append(row);
                        row.on("click", function(){
                            $.ajax({
                                url: "/books/add?id=" + result.ID,
                                method: "GET"
                            });
                        });
                    });
                }
            });
        });
    });
    </script>
</body>
</html>